<project default="jar:jar"
  xmlns:j="jelly:core"
  xmlns:m="maven"
  xmlns:reactor="reactor"
  xmlns:maven="jelly:org.apache.maven.jelly.tags.project.MavenTagLibrary">

  <postGoal name="dist:prepare-bin-filesystem">
    <copy todir="${maven.dist.bin.assembly.dir}">
        <fileset dir="${basedir}/etc/script" />
    </copy>
    <copy todir="${maven.dist.bin.assembly.dir}">
        <fileset dir="${basedir}/etc" >
            <include name="samples/*" />
        </fileset>
    </copy>

    <attainGoal name="site"/>
    
    <copy todir="${maven.dist.bin.assembly.dir}">
        <fileset dir="${maven.build.dir}">
            <include name="docs/*" />
        </fileset>
    </copy>
    
    <delete dir="${maven.dist.bin.assembly.dir}/docs/apidocs" />

    <delete file="${maven.dist.bin.assembly.dir}/${maven.final.name}.jar" />
    
    <mkdir dir="${maven.dist.bin.assembly.dir}/lib" />
    
    <!--attainGoal name="uberjar:uberjar"/>
    <move 
    	file="${maven.build.dir}/${pom.artifactId}-${pom.currentVersion}-uber.jar" 
    	tofile="${maven.dist.bin.assembly.dir}/lib/cvsgrab.jar"
   	/-->

    <attainGoal name="javaapp:jar"/>
    <move 
    	file="${maven.build.dir}/${pom.artifactId}-app.jar" 
    	tofile="${maven.dist.bin.assembly.dir}/lib/cvsgrab.jar"
   	/>
   	
  </postGoal>

</project>
